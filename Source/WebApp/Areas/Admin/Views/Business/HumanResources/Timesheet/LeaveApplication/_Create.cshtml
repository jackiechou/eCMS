@model LeaveApplicationCreateViewModel
@{
    int LanguageId = 10001;
    if (base.Session["LanguageId"] != null)
    {
        LanguageId = Convert.ToInt32(base.Session["LanguageId"]);
    }
}
    <div id="alertMessageBox">
        @if (ViewBag.DisplayErrorMessage == true)
        {
            <div class="@ViewBag.CssClass">
                <a href="#" class="close" data-dismiss="alert">&times;</a>
                <strong>@ViewBag.SortMessage !</strong>
                <div class="padding-left">
                  @Html.Raw(ViewBag.Message)
                </div>
            </div>
        }
    </div>

<div class="box">
    <div class="row">
        <div id="right_accordion" class="accordion-group">
            <div class="accordion-heading toolbar">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#form_accordion">
                    <span class="pull-right"><i class="icon-chevron-up icon-white"></i></span>
                    <span class="heading-tite">@Eagle.Resource.LanguageResource.InputArea</span>
                </a>
            </div>
            <div id="form_accordion" class="accordion-body collapse in">
                <div>
                    <div class="accordion-inner">
                        <div class="accordion-content">

                            <div>

                            <!--start row-->
                            <div class="row">
                                <div class="col-md-4">
                                    <label>
                                        @Eagle.Resource.LanguageResource.Year
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    @Html.TextBox("Year", ViewBag.Year as int?, new { @class = "span12  ", @id = "Year" })
                                </div>
                                <div class="col-md-4">
                                </div>
                                <div class="col-md-2">
                                </div>
                            </div>
                            <!--end row-->
                            <!--start row-->
                            <div class="row">
                                <div class="col-md-4">
                                    <label>
                                        @Eagle.Resource.LanguageResource.LeaveEntitlement
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="reset-label">
                                         @ViewData["LeaveEntitlement"]
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    <label>
                                        @Eagle.Resource.LanguageResource.TotalLeave
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="reset-label">
                                        @ViewData["TotalLeave"]
                                    </label>
                                </div>
                            </div>
                            <!--end row-->
                            <!--start row-->
                            <div class="row">
                                <div class="col-md-4">
                                    <label>
                                        @Eagle.Resource.LanguageResource.Seniority
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="reset-label">
                                        @ViewData["Seniority"]
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    <label>
                                        @Eagle.Resource.LanguageResource.LeaveTaken
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="reset-label">
                                        @ViewData["LeaveTakenInfor"]
                                    </label>
                                </div>
                            </div>
                            <!--end row-->
                            <!--start row-->
                            <div class="row">
                                <div class="col-md-4">
                                    <label>
                                        @Eagle.Resource.LanguageResource.LeaveForward
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="reset-label">
                                        @ViewData["LeaveForward"]
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    <label>
                                        @Eagle.Resource.LanguageResource.Balance
                                    </label>
                                </div>
                                <div class="col-md-2">
                                    <label class="reset-label">
                                        @ViewData["Balance"]
                                        <input type="hidden" id="BalanceCompare" name="BalanceCompare" value="@ViewData["Balance"]" /> 
                                    </label>
                                </div>
                            </div>
                            <!--end row-->
                            </div>
                            <hr />
                            <!--start row-->
                            <div class="row">
                                <div class="col-md-2">
                                    <label>
                                        @Eagle.Resource.LanguageResource.EmployeeCreate
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    <label class="reset-label">
                                        @ViewData["EmployeeCreate"]
                                    </label>
                                </div>
                                @if (Model != null && Model.LeaveApplicationMasterID != 0)
                                {
                                    @Html.HiddenFor(model => model.LeaveApplicationMasterID)
                                    @Html.HiddenFor(model => model.LevelApprover)
                                    <div class="col-md-2">
                                        <label>
                                            @Eagle.Resource.LanguageResource.Status
                                        </label>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="reset-label">
                                            @Model.StatusLeaveApplication
                                        </label>
                                    </div>
                                }
                            </div>
                            <!--end row-->
                            <!--start row-->
                            <div class="row">
                                <div class="col-md-2">
                                    <label>
                                        @Html.RequiredLabelFor(model => model.LSLeaveDayTypeID)
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBox("SelectLeaveDayTypeID", null, new { @class = "span12" })
                                    @Html.HiddenFor(model => model.LSLeaveDayTypeName)
                                    @Html.HiddenFor(model => model.LSLeaveDayTypeID)
                                </div>
                                <div class="col-md-2">
                                    <label>
                                        @Eagle.Resource.LanguageResource.LeaveTaken
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBox("LeaveTakenView", null, new { @class = "span4", @disabled = "disabled" })
                                    @Html.Hidden("LeaveTaken")
                                    <input type="button" id="btnDetail" value=" ..." class="direct_bt btn btn-larg1e row-fluid launchConfirm" />
                                </div>
                            </div>
                            <!--end row-->
                            <!--start row-->
                            <div class="row">
                                <div class="col-md-2">
                                    <label>
                                        @Html.RequiredLabelFor(model => model.FromDate)
                                    </label>
                                </div>
                                <div class="col-md-4">
                                  @*  @Html.Datepicker2For(model => model.strFromDate, "dd/MM/yyyy",null, LanguageId)*@
                                     @Html.DatepickerFor(model => model.FromDate, "dd/MM/yyyy", null, LanguageId)
                                </div>
                                <div class="col-md-2">
                                    <label>
                                        @Html.RequiredLabelFor(model => model.ToDate)
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @*@Html.Datepicker2For(model => model.strToDate, "dd/MM/yyyy",null, LanguageId)*@
                                    @Html.DatepickerFor(model => model.ToDate, "dd/MM/yyyy", null, LanguageId)
                                </div>
                            </div>
                            <!--end row-->

                            <!--start row-->
                            @if (Model == null || Model.LeaveApplicationMasterID == 0)
                            {
                            <div class="row">
                                <div class="col-md-2">
                                    <label>
                                        @Eagle.Resource.LanguageResource.Comment
                                    </label>
                                </div>
                                <div class="col-md-10">
                                    @Html.TextAreaFor(model => model.Comment, new { @class = "span12" })
                                </div>
                            </div>
                            }
                            else if (Model != null && Model.isFirstComment == true)
                            {
                                <div class="row">
                                <div class="col-md-2">
                                    <label>
                                        @Eagle.Resource.LanguageResource.Comment
                                    </label>
                                </div>
                                <div class="col-md-10">
                                    @Html.TextArea("Comment", Model.CurrentComment, new { @class = "span12" })
                                </div>
                            </div>
                            }
                            else
                            {
                                 @Html.Raw(Model.Comment)
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.LabelFor(model => model.Comment)
                                    </div>
                                    <div class="col-md-10">
                                        @Html.TextArea("CurrentComment", Model.CurrentComment, new { @class = "span12" })
                                    </div>
                                </div>
                                
                                @Html.Hidden("Comment", "-")
                            }
                            <!--end row-->
                            <div class="row">
                                <div class="footbar">
                                    <div>
                                         @if (ViewBag.DisabledSaveAndSend == "disabled" && ViewBag.DisabledApproveAndUnapprove == "disabled")
                                         {
                                             //Nếu cả 2 quyền bị cấm thì ta xét để hiển thị 2 nút theo quyền của người này bà bị disable
                                             if (Model.EmpID == ViewBag.EmpId)
                                             {
                                                <input type="button" id="btnAdd" value="@Eagle.Resource.LanguageResource.Save" class="direct_bt btn btn-larg1e row-fluid AddModel"  disabled />
                                                <input type="button" id="btnSendForApproval" value="@Eagle.Resource.LanguageResource.btnSendForApproval" class="direct_bt btn btn-info btn-larg1e row-fluid AddModel" disabled />
                                             }
                                             else
                                             {
                                                <input type="button" id="btnApproval" value="@Eagle.Resource.LanguageResource.btnApprove" class="direct_bt btn btn-info btn-larg1e row-fluid AddModel" disabled />
                                                <input type="button" id="btnUnApproval" value="@Eagle.Resource.LanguageResource.btnUnapprove" class="btn btn-larg1e row-fluid AddModel" disabled />
                                             }
                                         }
                                         else
                                         {
                                            if (ViewBag.DisabledSaveAndSend != "disabled")
                                            {
                                                //Nếu là người send thì hiển thị 2 nút dbr và send
                                                <input type="button" id="btnAdd" value="@Eagle.Resource.LanguageResource.Save" class="direct_bt btn btn-larg1e row-fluid AddModel" />
                                                <input type="button" id="btnSendForApproval" value="@Eagle.Resource.LanguageResource.btnSendForApproval" class="direct_bt btn btn-info btn-larg1e row-fluid AddModel" />
                                            }else{
                                                //Nếu là người approve thì hiển thị 2 nút approval và unapproval
                                                <input type="button" id="btnApproval" value="@Eagle.Resource.LanguageResource.btnApprove" class="direct_bt btn btn-info btn-larg1e row-fluid AddModel" />
                                                <input type="button" id="btnUnApproval" value="@Eagle.Resource.LanguageResource.btnUnapprove" class="btn btn-larg1e row-fluid AddModel" />    
                                            }
                                         }

                                    </div>
                                </div>
                            </div>
                                
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@Html.Action("jqueryval", "Common", null)
<script type="text/javascript">
    InvokeDateTimePicker();
    var strInput = '@Html.Raw(Eagle.Resource.LanguageResource.PleaseInputLeaveType)';
    PopulateDropDownListAutoComplete("SelectLeaveDayTypeID", "LSLeaveDayTypeID", "LSLeaveDayTypeName", strInput, areas + '/LeaveDayType/DropdownList');
</script>
<!-- popup-->
<div id="modal-content" class="modal hide fade" style="width: 500px;margin: auto auto;">
    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Leave taken detail</h3>
    </div>
    <div id="divPopup" class="modal-body">
        @if (Model != null)
        {
            @Html.Action("_GetListDays", "LeaveApplication", new { @id = Model.LeaveApplicationMasterID }) 
        }
    </div>
    <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-primary" data-value="1">@Eagle.Resource.LanguageResource.btnSave</button>
    </div>
</div>
<!-- end popup-->